#!/bin/bash
# üìÅ –§–∞–π–ª: backup_push.sh
# üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–º–∏—Ç–∏—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ø—É—à–∏—Ç –∏—Ö –Ω–∞ GitHub —Å –ø–æ–¥–ø–∏—Å—å—é —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã.

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ (—É–∫–∞–∂–∏ –ø—É—Ç—å, –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—Ç–∞) –∑–∞–∞–ø—É—Å—Ç–∏—Ç—å .\backup_push.sh
cd "$(dirname "$0")" || exit

# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
DATE=$(date '+%Y-%m-%d %H:%M:%S')

# –ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
if git diff --quiet && git diff --cached --quiet; then
  echo "‚úÖ –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞. –ë—ç–∫–∞–ø –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è."
  exit 0
fi

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
git add -u

# –°–æ–∑–¥–∞—ë–º –∫–æ–º–º–∏—Ç —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π
git commit -m "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—ç–∫–∞–ø–∞: $DATE"

# –ü—É—à–∏–º –Ω–∞ GitHub
git push origin main

echo "‚úÖ –ë—ç–∫–∞–ø –æ–±–Ω–æ–≤–ª—ë–Ω –∏ –∑–∞–ø—É—à–µ–Ω: $DATE"
